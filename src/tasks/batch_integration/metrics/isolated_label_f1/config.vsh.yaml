# use metric api spec
__merge__: ../../api/comp_metric_graph.yaml
functionality:
  name: isolated_label_f1
  info:
    metrics:
      - name: isolated_label_f1
        label: Isolated label F1 score
        summary: "Evaluate how well isolated labels are correctly clustered"
        description: |
          "Isolated cell labels are labels present in the least number of batches and can be subject to overintegration. The score evaluates how well these isolated labels separate from other cell identities. The isolated label assignment is compared against the cluster with the optimal leiden cluster resolution (from 0.1 to 2 in resolution steps of 0.1) based on F1 score. The optimal F1 score for the isolated label is then used as the metric score, with a value between 0 and 1 where 1 shows that all of the isolated label cells and no others are captured in the cluster."
        reference: luecken2022benchmarking
        v1:
          path: openproblems/tasks/_batch_integration/batch_integration_graph/metrics/iso_label_f1.py
          commit: b3456fd73c04c28516f6df34c57e6e3e8b0dab32
        min: 0
        max: 1
        maximize: true
  resources:
    - type: python_script
      path: script.py
platforms:
  - type: docker
    image: ghcr.io/openproblems-bio/base_python:1.0.1
    setup:
      - type: python
        pypi:
          - scib==1.1.4
  - type: nextflow
    directives: 
      label: [ midmem, lowcpu ]
