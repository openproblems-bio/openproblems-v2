functionality:
  name: download_10x_visium
  namespace: datasets/loaders
  description: |
    Download a SpaceRanger h5 file from the 10x genomics website (or someplace else).
  
  argument_groups: 
    - name: Inputs
      arguments:
        - name: "--input_expression"
          type: string
          description: URL to the feature / barcode matrix HDF5.
          required: true
        - name: "--input_spatial"
          type: string
          description: URL to the Spatial imaging data.
          required: true
    - name: Outputs
      arguments:
        - name: "--dataset"
          type: file
          direction: output
          description: Output h5ad file
          required: true
          example: dataset.h5ad
    - name: Metadata
      arguments:
        - name: "--dataset_id"
          type: string
          description: Unique identifier of the dataset.
          required: true
        - name: "--dataset_name"
          type: string
          description: Nicely formatted name.
          required: true
        - name: "--dataset_url"
          type: string
          description: Link to the original source of the dataset.
          required: false
        - name: "--dataset_reference"
          type: string
          description: Bibtex reference of the paper in which the dataset was published.
          required: false
        - name: "--dataset_summary"
          type: string
          description: Short description of the dataset.
          required: true
        - name: "--dataset_description"
          type: string
          description: Long description of the dataset.
          required: true
        - name: "--dataset_organism"
          type: string
          description: The organism of the dataset.
          required: false
  
  resources:
    - type: python_script
      path: script.py
  test_resources:
    - type: python_script
      path: test.py

platforms:
  - type: docker
    image: ghcr.io/openproblems-bio/base_python:1.0.4
    setup:
      - type: python
        packages:
          - squidpy
  - type: nextflow
