functionality:
  name: "openproblems_v1"
  namespace: "datasets/loaders"
  description: "Fetch a dataset from OpenProblems v1"
  argument_groups:
    - name: Inputs
      arguments:
        - name: "--dataset_id"
          type: "string"
          description: "The ID of the dataset"
          required: true
        - name: "--obs_celltype"
          type: "string"
          description: "Location of where to find the observation cell types."
        - name: "--obs_batch"
          type: "string"
          description: "Location of where to find the observation batch IDs."
        - name: "--obs_tissue"
          type: "string"
          description: "Location of where to find the observation tissue information."
        - name: "--layer_counts"
          type: "string"
          description: "In which layer to find the counts matrix. Leave undefined to use `.X`."
          example: counts
        - name: "--sparse"
          type: boolean
          default: true
          description: Convert layers to a sparse CSR format.
    - name: Metadata
      arguments:
        - name: "--dataset_name"
          type: string
          description: Nicely formatted name.
          required: true
        - name: "--data_url"
          type: string
          description: Link to the original source of the dataset.
          required: false
        - name: "--data_reference"
          type: string
          description: Bibtex reference of the paper in which the dataset was published.
          required: false
        - name: "--dataset_summary"
          type: string
          description: Short description of the dataset.
          required: true
        - name: "--dataset_description"
          type: string
          description: Long description of the dataset.
          required: true
    - name: Outputs
      arguments:
        - name: "--output"
          __merge__: ../../api/anndata_raw.yaml
          direction: "output"
  resources:
    - type: python_script
      path: script.py
  test_resources:
    - type: python_script
      path: test.py
platforms:
  - type: docker
    image: singlecellopenproblems/openproblems
    setup:
      - type: python
        packages:
          - scanpy
          - "anndata>=0.8"
  - type: nextflow
