functionality:
  name: "svg"
  namespace: "datasets/processors"
  description: "Compute SVG"
  info:
    type: dataset_processor
    type_info:
      label: SVG
      description: |
        Computes the spatially variable genes scores and select certain number of SVGs as reference.
  arguments:
    - name: "--input"
      __merge__: ../../api/file_normalized.yaml
      required: true
      direction: input
    - name: "--input_layer"
      type: string
      default: "normalized"
      description: Which layer to use as input.
    - name: "--output"
      type: file
      direction: output
      required: true
      example: "resources_test/common/mouse_brain_coronal_section1/svg.h5ad"
    - name: "--num_features"
      type: integer
      default: 200
      description: "The number of SVG to select"
  resources:
    - type: python_script
      path: script.py
  test_resources:
    - path: /resources_test/common/mouse_brain_coronal_section1
      dest: resources_test/common/mouse_brain_coronal_section1
    - type: python_script
      path: /src/common/comp_tests/run_and_check_adata.py
platforms:
  - type: docker
    image: ghcr.io/openproblems-bio/base_python:1.0.4
    setup: 
      - type: python
        packages:
          - squidpy
  - type: nextflow
    directives:
      label: [midtime, highmem, midcpu]
