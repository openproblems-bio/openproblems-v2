# use method api spec
__merge__: ../../api/comp_method_embedding.yaml
functionality:
  name: scvi
  info:
    label: scVI
    summary: "scVI combines a variational autoencoder with a hierarchical Bayesian model."
    description: |
      scVI combines a variational autoencoder with a hierarchical Bayesian model. It uses the negative binomial distribution to describe gene expression of each cell, conditioned on unobserved factors and the batch variable. ScVI is run as implemented in Luecken et al.
    reference: "lopez2018deep"
    repository_url: "https://github.com/YosefLab/scvi-tools"
    documentation_url: "https://github.com/YosefLab/scvi-tools#readme"
    v1:
      path: openproblems/tasks/_batch_integration/batch_integration_graph/methods/scvi.py
      commit: 29803b95c88b4ec5921df2eec7111fd5d1a95daf
    preferred_normalization: log_cpm
    variants:
      scvi_full_unscaled:
      scvi_hvg_unscaled:
        hvg: true
  resources:
    - type: python_script
      path: script.py
platforms:
  - type: docker
    image: ghcr.io/openproblems-bio/base-r:latest
    setup:
      - type: python
        pypi:
          - scvi-tools
          - scanpy
          - scib==1.1.3
  - type: nextflow
