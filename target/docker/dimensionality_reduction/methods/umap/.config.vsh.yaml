functionality:
  name: "umap"
  namespace: "dimensionality_reduction/methods"
  version: "main_build"
  arguments:
  - type: "file"
    name: "--input"
    description: "The dataset to pass to a method."
    info:
      short_description: "Dataset"
      slots:
        layers:
        - type: "integer"
          name: "counts"
          description: "Raw counts"
          required: true
        - type: "double"
          name: "normalized"
          description: "Normalized expression values"
          required: true
        var:
        - type: "double"
          name: "hvg_score"
          description: "High variability gene score (normalized dispersion). The greater,\
            \ the more variable."
          required: true
        uns:
        - type: "string"
          name: "dataset_id"
          description: "A unique identifier for the dataset"
          required: true
        - type: "string"
          name: "normalization_id"
          description: "Which normalization was used"
          required: true
    example:
    - "resources_test/dimensionality_reduction/pancreas/dataset.h5ad"
    must_exist: true
    create_parent: true
    required: true
    direction: "input"
    multiple: false
    multiple_sep: ":"
    dest: "par"
  - type: "file"
    name: "--output"
    description: "A dataset with dimensionality reduction embedding."
    info:
      short_description: "Embedding"
      slots:
        obsm:
        - type: "double"
          name: "X_emb"
          description: "The dimensionally reduced embedding."
        uns:
        - type: "string"
          name: "dataset_id"
          description: "A unique identifier for the dataset"
        - type: "string"
          name: "method_id"
          description: "A unique identifier for the method"
        - type: "string"
          name: "normalization_id"
          description: "Which normalization was used"
          required: true
    example:
    - "resources_test/dimensionality_reduction/pancreas/embedding.h5ad"
    must_exist: true
    create_parent: true
    required: true
    direction: "output"
    multiple: false
    multiple_sep: ":"
    dest: "par"
  - type: "integer"
    name: "--n_hvg"
    description: "Number of highly variable genes to subset to. If not specified,\
      \ the input matrix will not be subset."
    default:
    - 1000
    required: false
    direction: "input"
    multiple: false
    multiple_sep: ":"
    dest: "par"
  - type: "integer"
    name: "--n_pca_dims"
    description: "Number of PCA dimensions to use. If not specified, no PCA will be\
      \ performed."
    required: false
    direction: "input"
    multiple: false
    multiple_sep: ":"
    dest: "par"
  resources:
  - type: "python_script"
    path: "script.py"
    is_executable: true
  test_resources:
  - type: "file"
    path: "resources_test/dimensionality_reduction/pancreas/"
    dest: "resources_test/dimensionality_reduction/pancreas/"
  - type: "python_script"
    path: "src/common/comp_tests/check_method_config.py"
    is_executable: true
  - type: "python_script"
    path: "src/common/comp_tests/run_and_check_adata.py"
    is_executable: true
  - type: "file"
    path: "src/common/library.bib"
  info:
    pretty_name: "UMAP"
    summary: "A manifold learning algorithm that utilizes topological data analysis\
      \ for dimension reduction."
    description: "\"Uniform Manifold Approximation and Projection is an algorithm\
      \ for\ndimension reduction based on manifold learning techniques and ideas from\n\
      topological data analysis. We perform UMAP on the logCPM expression matrix\n\
      before and after HVG selection and with and without PCA as a pre-processing\n\
      step.\"\n"
    reference: "mcinnes2018umap"
    repository_url: "https://github.com/lmcinnes/umap"
    documentation_url: "https://github.com/lmcinnes/umap#readme"
    v1_url: "openproblems/tasks/dimensionality_reduction/methods/umap.py"
    v1_commit: "14d70b330cae09527a6d4c4e552db240601e31cf"
    preferred_normalization: "log_cpm"
    variants:
      umap_logCPM: null
      umap_pca_logCPM:
        n_pca_dims: 50
      umap_logCPM_1kHVG:
        n_hvg: 1000
      umap_pca_logCPM_1kHVG:
        n_pca_dims: 50
        n_hvg: 1000
    type: "method"
    type_info:
      label: "Method"
      description: "A dimensionality reduction method to summarise the biological\
        \ information in\na dataset in as few dimensions as possible.\n"
  status: "enabled"
  set_wd_to_resources_dir: false
platforms:
- type: "docker"
  id: "docker"
  image: "ghcr.io/openproblems-bio/base-python:latest"
  target_organization: "openproblems-bio"
  target_registry: "ghcr.io"
  namespace_separator: "/"
  resolve_volume: "Automatic"
  chown: true
  setup_strategy: "ifneedbepullelsecachedbuild"
  target_image_source: "https://github.com/openproblems-bio/openproblems-v2"
  setup:
  - type: "python"
    user: false
    packages:
    - "scanpy"
    - "umap-learn"
    upgrade: true
- type: "nextflow"
  id: "nextflow"
  variant: "vdsl3"
  directives:
    label:
    - "highmem"
    - "highcpu"
    tag: "$id"
  auto:
    simplifyInput: true
    simplifyOutput: true
    transcript: false
    publish: false
  debug: false
  container: "docker"
info:
  config: "/home/runner/work/openproblems-v2/openproblems-v2/src/tasks/dimensionality_reduction/methods/umap/config.vsh.yaml"
  platform: "docker"
  output: "/home/runner/work/openproblems-v2/openproblems-v2/target/docker/dimensionality_reduction/methods/umap"
  executable: "/home/runner/work/openproblems-v2/openproblems-v2/target/docker/dimensionality_reduction/methods/umap/umap"
  viash_version: "0.7.3"
  git_commit: "00be82d9978a13cf61a4ade3633dbc6aec629ce3"
  git_remote: "https://github.com/openproblems-bio/openproblems-v2"
